--建立表格:CUS_FAVORITE_SPOT
---------------------------------------------------------------------
DELETE FROM CUS_FAVORITE_SPOT;
--刪除table:
DROP TABLE CUS_FAVORITE_SPOT CASCADE CONSTRAINTS;
--刪除sequence:
DROP SEQUENCE CUS_FAVORITE_SPOT_SEQ;

CREATE TABLE CUS_FAVORITE_SPOT
(
	CUS_ID	     VARCHAR2(20) NOT NULL,
	SYS_SPOT_ID  VARCHAR2(20) NOT NULL,
	SPOT_NAME				 VARCHAR2(100) NOT NULL,	
	CONSTRAINT CUS_FAVORITE_SPOT_PK PRIMARY KEY (CUS_ID, SYS_SPOT_ID)
 );


CREATE SEQUENCE CUS_FAVORITE_SPOT_SEQ
INCREMENT BY 1
START WITH 1
NOMAXVALUE
NOCYCLE
NOCACHE
NOORDER;



--查詢目前表格中有使用中sequence
-- SELECT * FROM USER_SEQUENCES;

--ALTER TABLE CUS_FAVORITE_SPOT
--  ADD CONSTRAINT CUS_FAVORITE_SPOT_CUS_USER_FK FOREIGN KEY (CUS_ID)
--			REFERENCES CUS_USER (CUS_ID);
--ALTER TABLE CUS_FAVORITE_SPOT
--  ADD CONSTRAINT CUS_FAVORITE_SPOT_SYS_SPOT_FK FOREIGN KEY (SYS_SPOT_ID)
--			REFERENCES SYS_SPOT (SYS_SPOT_ID);

INSERT INTO CUS_FAVORITE_SPOT (CUS_ID, SYS_SPOT_ID, SPOT_NAME) VALUES ('CU000001','SS000001', '中央大學');
INSERT INTO CUS_FAVORITE_SPOT (CUS_ID, SYS_SPOT_ID, SPOT_NAME) VALUES ('CU000002','SS000002', '台北101');
INSERT INTO CUS_FAVORITE_SPOT (CUS_ID, SYS_SPOT_ID, SPOT_NAME) VALUES ('CU000003','SS000003', '全家便利商店');

--得知目前使用到幾號 :
SELECT CUS_FAVORITE_SPOT_SEQ.CURRVAL FROM DUAL; 
--取用一組新的值:
--SELECT CUS_FAVORITE_SPOT_SEQ.NEXTVAL FROM DUAL; 

commit;