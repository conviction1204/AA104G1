--建立表格:CUS_TRAVEL_DETAIL
---------------------------------------------------------------------
DELETE FROM CUS_TRAVEL_DETAIL;
--刪除table:
DROP TABLE CUS_TRAVEL_DETAIL CASCADE CONSTRAINTS;
--刪除sequence:
DROP SEQUENCE CUS_TRAVEL_DETAIL_ID_SEQ;

CREATE TABLE CUS_TRAVEL_DETAIL
(
  CUS_TRAVEL_DETAIL_ID	VARCHAR2(20) NOT NULL,
  CUS_TRAVEL_NOTE_ID	VARCHAR2(20) NOT NULL,  
  DATE_RECORD					DATE NOT NULL,
  CONTENT							CLOB,
  DETAIL_NAME				  VARCHAR2(100) NOT NULL,
  CONSTRAINT CUS_TRAVEL_DETAIL_PK PRIMARY KEY (CUS_TRAVEL_DETAIL_ID)
);


CREATE SEQUENCE CUS_TRAVEL_DETAIL_ID_SEQ
INCREMENT BY 1
START WITH 1
NOMAXVALUE
NOCYCLE
NOCACHE
NOORDER;



--查詢目前表格中有使用中sequence
-- SELECT * FROM USER_SEQUENCES;

--ALTER TABLE CUS_TRAVEL_DETAIL
--  ADD CONSTRAINT CUS_TRA_DETAIL_CUS_TRA_NOTE_FK FOREIGN KEY(CUS_TRAVEL_NOTE_ID)
--      REFERENCES CUS_TRAVEL_NOTE (CUS_TRAVEL_NOTE_ID);

INSERT INTO CUS_TRAVEL_DETAIL 
(CUS_TRAVEL_DETAIL_ID,CUS_TRAVEL_NOTE_ID,DATE_RECORD,CONTENT,DETAIL_NAME) VALUES ('CTD'||LPAD(CUS_TRAVEL_DETAIL_ID_SEQ.NEXTVAL,6,'0'), 'CTN000001', sysdate, '歡歡喜喜來出遊,突然遇到一陣大風吹來,天空中散落一地的不是花瓣,是小明手中掉落的明信片,一個個熟悉的名字......', '北海岸之旅第一站-北列境');
INSERT INTO CUS_TRAVEL_DETAIL 
(CUS_TRAVEL_DETAIL_ID,CUS_TRAVEL_NOTE_ID,DATE_RECORD,CONTENT,DETAIL_NAME) VALUES ('CTD'||LPAD(CUS_TRAVEL_DETAIL_ID_SEQ.NEXTVAL,6,'0'), 'CTN000001', sysdate, 
'來到沒有海的海邊，小明......', '北海岸之旅第二站-這裡沒有海');
INSERT INTO CUS_TRAVEL_DETAIL 
(CUS_TRAVEL_DETAIL_ID,CUS_TRAVEL_NOTE_ID,DATE_RECORD,CONTENT,DETAIL_NAME) VALUES ('CTD'||LPAD(CUS_TRAVEL_DETAIL_ID_SEQ.NEXTVAL,6,'0'), 'CTN000001', sysdate, 
'來到淡水海畔,兩個人的愛情,已經沒人看已經沒人聽', '北海岸之旅第三站-淡淡哀傷水結成冰');


--得知目前使用到幾號 :
SELECT CUS_TRAVEL_DETAIL_ID_SEQ.CURRVAL FROM DUAL; 
--取用一組新的值:
--SELECT CUS_TRAVEL_DETAIL_ID_SEQ.NEXTVAL FROM DUAL; 

commit;