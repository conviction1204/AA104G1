--建立表格:CUS_TRAVEL_PIC
---------------------------------------------------------------------
DELETE FROM CUS_TRAVEL_PIC;
--刪除table:
DROP TABLE CUS_TRAVEL_PIC CASCADE CONSTRAINTS;
--刪除sequence:
DROP SEQUENCE CUS_TRAVEL_PIC_ID_SEQ;

CREATE TABLE CUS_TRAVEL_PIC
(
  CUS_TRAVEL_PIC_ID		VARCHAR2(20) NOT NULL,
  CUS_TRAVEL_DETAIL_ID	VARCHAR2(20) NOT NULL,  
  PIC_NAME				VARCHAR2(30)NOT NULL,
  PIC_FILETYPE			VARCHAR2(30)NOT NULL,
  DATE_RECORD			DATE NOT NULL,
  PIC					BLOB,
  CONSTRAINT CUS_TRAVEL_PIC_PK PRIMARY KEY (CUS_TRAVEL_PIC_ID)
);


CREATE SEQUENCE CUS_TRAVEL_PIC_ID_SEQ
INCREMENT BY 1
START WITH 1
NOMAXVALUE
NOCYCLE
NOCACHE
NOORDER;



--查詢目前表格中有使用中sequence
-- SELECT * FROM USER_SEQUENCES;

--ALTER TABLE CUS_TRAVEL_PIC
--  ADD CONSTRAINT CUS_TRA_PIC_CUS_TRA_DETAIL_FK FOREIGN KEY(CUS_TRAVEL_DETAIL_ID)
--      REFERENCES CUS_TRAVEL_DETAIL (CUS_TRAVEL_DETAIL_ID);

INSERT INTO CUS_TRAVEL_PIC 
(CUS_TRAVEL_PIC_ID,CUS_TRAVEL_DETAIL_ID,PIC_NAME,PIC_FILETYPE,DATE_RECORD) 
VALUES ('CTP'||LPAD(CUS_TRAVEL_PIC_ID_SEQ.NEXTVAL,6,'0'), 'CTD000003', '漂亮嗎', '.jpg', sysdate);

INSERT INTO CUS_TRAVEL_PIC 
(CUS_TRAVEL_PIC_ID,CUS_TRAVEL_DETAIL_ID,PIC_NAME,PIC_FILETYPE,DATE_RECORD) 
VALUES ('CTP'||LPAD(CUS_TRAVEL_PIC_ID_SEQ.NEXTVAL,6,'0'), 'CTD000003', '不漂亮嗎?', '.png', sysdate);


--得知目前使用到幾號 :
SELECT CUS_TRAVEL_PIC_ID_SEQ.CURRVAL FROM DUAL; 
--取用一組新的值:
--SELECT CUS_TRAVEL_PIC_ID_SEQ.NEXTVAL FROM DUAL; 

commit;